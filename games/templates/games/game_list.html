{% extends "base.html" %}
{% load static %}
{% block title %}Games{% endblock %}

{% block content %}
<h3 class="mb-3">ğŸ“… è³½ç¨‹</h3>

<!-- å³å°‡é–‹è³½ -->
<div class="card p-3 mb-4">
  <div class="d-flex justify-content-between align-items-center mb-2">
    <h5 class="mb-0">å³å°‡é–‹è³½</h5>
    <a class="btn btn-sm btn-ghost" href="{% url 'games:list' %}">çœ‹å®Œæ•´è³½ç¨‹</a>
  </div>

  <div class="table-responsive">
    <table class="table table-sm align-middle">
      <thead>
        <tr>
          <th style="width:190px;">æ™‚é–“</th>
          <th>å°æˆ°</th>
          <th class="text-end" style="width:120px;"></th>
        </tr>
      </thead>

      <tbody>
      {% for g in upcoming %}
        <tr>
          <td class="text-muted small">
            {{ g.start_time_utc|date:"Y-m-d" }} {{ g.start_time_utc|time:"H:i" }}
          </td>

          <td>
            <div class="d-flex align-items-center gap-2 flex-wrap">
              <div class="d-flex align-items-center gap-2">
                <img src="{% static 'team_logos/' %}{{ g.away_team.nba_team_id }}.svg"
                     style="height:22px;width:auto"
                     alt="{{ g.away_team.name }}"
                     onerror="this.style.display='none'">
                <span class="fw-semibold">{{ g.away_team.abbr|default:g.away_team.name }}</span>
              </div>

              <span class="text-muted">@</span>

              <div class="d-flex align-items-center gap-2">
                <img src="{% static 'team_logos/' %}{{ g.home_team.nba_team_id }}.svg"
                     style="height:22px;width:auto"
                     alt="{{ g.home_team.name }}"
                     onerror="this.style.display='none'">
                <span class="fw-semibold">{{ g.home_team.abbr|default:g.home_team.name }}</span>
              </div>
            </div>
          </td>

          <td class="text-end">
            <a class="btn btn-sm btn-accent" href="{% url 'games:detail' g.id %}">ä¸‹æ³¨</a>
          </td>
        </tr>
      {% empty %}
        <tr>
          <td colspan="3" class="text-muted">æ²’æœ‰è³‡æ–™ï¼šè«‹å…ˆè·‘ sync_nba_schedule</td>
        </tr>
      {% endfor %}
      </tbody>
    </table>
  </div>
</div>

<!-- æœ€è¿‘æ¯”è³½ -->
<div class="card p-3">
  <h5 class="mb-2">æœ€è¿‘æ¯”è³½</h5>

  <div class="table-responsive">
    <table class="table table-sm align-middle">
      <thead>
        <tr>
          <th style="width:190px;">æ™‚é–“</th>
          <th>å°æˆ°</th>
          <th style="width:120px;">æ¯”åˆ†</th>
          <th style="width:90px;">ç‹€æ…‹</th>
        </tr>
      </thead>

      <tbody>
      {% for g in recent %}
        <tr>
          <td class="text-muted small">
            {{ g.start_time_utc|date:"Y-m-d" }} {{ g.start_time_utc|time:"H:i" }}
          </td>

          <td>
            <div class="d-flex align-items-center gap-2 flex-wrap">
              <div class="d-flex align-items-center gap-2">
                <img src="{% static 'team_logos/' %}{{ g.away_team.nba_team_id }}.svg"
                     style="height:22px;width:auto"
                     alt="{{ g.away_team.name }}"
                     onerror="this.style.display='none'">
                <span class="fw-semibold">{{ g.away_team.abbr|default:g.away_team.name }}</span>
              </div>

              <span class="text-muted">@</span>

              <div class="d-flex align-items-center gap-2">
                <img src="{% static 'team_logos/' %}{{ g.home_team.nba_team_id }}.svg"
                     style="height:22px;width:auto"
                     alt="{{ g.home_team.name }}"
                     onerror="this.style.display='none'">
                <span class="fw-semibold">{{ g.home_team.abbr|default:g.home_team.name }}</span>
              </div>
            </div>
          </td>

          <td>
            <span class="fw-semibold">{{ g.away_score }}</span>
            <span class="text-muted">-</span>
            <span class="fw-semibold">{{ g.home_score }}</span>
          </td>

          <td>
            {% if g.status == 3 %}
              <span class="badge bg-success">Final</span>
            {% elif g.status == 2 %}
              <span class="badge bg-warning text-dark">Live</span>
            {% else %}
              <span class="badge bg-secondary">Scheduled</span>
            {% endif %}
          </td>
        </tr>
      {% empty %}
        <tr><td colspan="4" class="text-muted">å°šç„¡è³‡æ–™</td></tr>
      {% endfor %}
      </tbody>
    </table>
  </div>
</div>
{% endblock %}
